import{Z as U,_ as O,r as w,B as N,a as g,o as c,g as u,d as t,w as a,h as n,t as s,e as o,c as L,m as k,j as Y,A as S,p as P,q as z,i as J,u as Z,v as j,J as G,F as E,n as I,l as K,L as Q}from"./index.165355ae.js";const V=(p,x="YYYY-MM-DD HH:mm:ss")=>{let e=U(p);return e.isValid()?e.format(x):""};const B=p=>(P("data-v-9e9c5713"),p=p(),z(),p),W={class:"orderInfoDrawer-page"},X=B(()=>o("h2",{class:"font-bold mb-2"},"\u5BA2\u6237\u4FE1\u606F",-1)),ee=B(()=>o("h2",{class:"font-bold my-2"},"\u8BA2\u5355\u4FE1\u606F",-1)),te={class:"relative"},ae={key:0,type:"danger"},oe={key:1,type:"warning"},se={key:2,type:"warning"},le={key:3,type:"success"},ne={key:0,class:"iconfont icon-weizhifu order-status-icon1"},re={key:1,class:"iconfont icon-yizhifu order-status-icon"},de={key:2,class:"iconfont icon-yifahuo order-status-icon"},ce={key:3,class:"iconfont icon-yisongda order-status-icon"},_e=B(()=>o("h2",{class:"font-bold my-2"},"\u8BA2\u5355\u5546\u54C1\u5217\u8868",-1)),ie={__name:"OrderInfoDrawer",props:{orderId:{type:Number,required:!0,default:115}},setup(p){const x=p,e=w({orderDetailInfoList:[],customInfo:{},addressInfo:{}}),r=w(!1),f=y=>{r.value=!0,S.orderInfo.findById(y).then(D=>{e.value=D}).finally(()=>{r.value=!1})};return N(()=>{f(x.orderId)}),(y,D)=>{const i=g("el-descriptions-item"),v=g("el-tag"),$=g("el-descriptions"),m=g("el-table-column"),h=g("el-table"),C=g("el-skeleton");return c(),u("div",W,[t(C,{animated:"",loading:r.value,rows:10},{default:a(()=>[X,t($,{column:2,border:""},{default:a(()=>[t(i,{label:"\u7528\u6237\u6635\u79F0","label-class-name":"w-[120px]","class-name":"w-[200px]","label-align":"center"},{default:a(()=>[n(s(e.value.customInfo.custom_realName),1)]),_:1}),t(i,{label:"\u624B\u673A\u53F7\u7801","label-class-name":"w-[120px]","label-align":"center"},{default:a(()=>[n(s(e.value.customInfo.custom_tel),1)]),_:1}),t(i,{label:"\u90AE\u7BB1","label-align":"center"},{default:a(()=>[n(s(e.value.customInfo.custom_email),1)]),_:1}),t(i,{label:"\u7528\u6237\u6027\u522B","label-align":"center"},{default:a(()=>[t(v,null,{default:a(()=>[n("\u7537")]),_:1})]),_:1}),t(i,{label:"\u7528\u6237\u5730\u5740","label-align":"center"},{default:a(()=>[n(s(e.value.customInfo.custom_addr),1)]),_:1})]),_:1}),ee,o("div",te,[t($,{column:2,border:""},{default:a(()=>[t(i,{label:"\u8BA2\u5355\u7F16\u53F7","label-class-name":"w-[120px]","class-name":"w-[200px]","label-align":"center"},{default:a(()=>[n(s(e.value.id),1)]),_:1}),t(i,{label:"\u8BA2\u5355\u72B6\u6001","label-class-name":"w-[120px]","label-align":"center"},{default:a(()=>[e.value.order_status===0?(c(),L(v,{key:0,type:"info"},{default:a(()=>[n("\u672A\u4ED8\u6B3E")]),_:1})):e.value.order_status===1?(c(),L(v,{key:1,type:"danger"},{default:a(()=>[n("\u5DF2\u4ED8\u6B3E")]),_:1})):e.value.order_status===2?(c(),L(v,{key:2,type:"warning"},{default:a(()=>[n("\u5DF2\u53D1\u8D27")]),_:1})):e.value.order_status===3?(c(),L(v,{key:3,type:"warning"},{default:a(()=>[n("\u5DF2\u6536\u8D27")]),_:1})):k("",!0)]),_:1}),t(i,{label:"\u8BA2\u5355\u63D0\u4EA4\u65F6\u95F4","label-align":"center"},{default:a(()=>[n(s(Y(V)(e.value.order_submission_time,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),t(i,{label:"\u8BA2\u5355\u4ED8\u6B3E\u65F6\u95F4","label-align":"center"},{default:a(()=>[n(s(Y(V)(e.value.order_pay_time,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),t(i,{label:"\u4ED8\u6B3E\u65B9\u5F0F","label-align":"center"},{default:a(()=>[e.value.order_pay_type===1?(c(),u("span",ae,"\u652F\u4ED8\u5B9D")):e.value.order_pay_type===2?(c(),u("span",oe,"\u5FAE\u4FE1")):e.value.order_pay_type===3?(c(),u("span",se,"\u94F6\u884C\u5361")):e.value.order_pay_type===4?(c(),u("span",le,"\u8D27\u5230\u4ED8\u6B3E")):k("",!0)]),_:1}),t(i,{label:"\u6536\u8D27\u4EBA","label-align":"center"},{default:a(()=>[n(s(e.value.addressInfo.address_name),1)]),_:1}),t(i,{label:"\u6536\u8D27\u4EBA\u7535\u8BDD","label-align":"center",span:2},{default:a(()=>[n(s(e.value.addressInfo.address_tel),1)]),_:1}),t(i,{label:"\u6536\u8D27\u5730\u5740","label-align":"center",span:2},{default:a(()=>[n(s(`${e.value.addressInfo.province} ${e.value.addressInfo.city} ${e.value.addressInfo.city}
                                                ${e.value.addressInfo.address_detail}`),1)]),_:1})]),_:1}),e.value.order_status===0?(c(),u("span",ne)):e.value.order_status===1?(c(),u("span",re)):e.value.order_status===2?(c(),u("span",de)):e.value.order_status===3?(c(),u("span",ce)):k("",!0)]),_e,t(h,{"max-height":"500",border:"",stripe:"",data:e.value.orderDetailInfoList},{default:a(()=>[t(m,{width:"70",label:"\u5E8F\u53F7",align:"center"},{default:a(({row:H,$index:_})=>[n(s(_+1),1)]),_:1}),t(m,{label:"\u5546\u54C1\u540D\u79F0",prop:"goodsInfo.goods_name","header-align":"center"}),t(m,{label:"\u5546\u54C1\u4EF7\u683C",prop:"goodsInfo.goods_price",align:"center",width:"120"}),t(m,{label:"\u9500\u552E\u4EF7\u683C",prop:"goodsInfo.goods_sale_price",align:"center",width:"120"}),t(m,{label:"\u5546\u54C1\u6570\u91CF",prop:"goods_num",align:"center",width:"100"})]),_:1},8,["data"])]),_:1},8,["loading"])])}}},ue=O(ie,[["__scopeId","data-v-9e9c5713"]]);const pe=p=>(P("data-v-3d963068"),p=p(),z(),p),fe={class:"w-full bg-gray-100"},ge={class:"right-page flex flex-row"},me={class:"mt-20 ml-20 mr-20 w-full h-full"},ye=pe(()=>o("div",{class:"flex flex-row items-baseline my-5 text-gray-500"},[o("span",{class:"text-[22px]"},"\u6211\u7684\u8BA2\u5355"),o("span",{class:"text-[12px] ml-4"},"\u8BF7\u8C28\u9632\u9493\u9C7C\u94FE\u63A5\u6216\u8BC8\u9A97\u7535\u8BDD")],-1)),ve={class:"order-type-list mt-20"},be={class:"card-header"},xe=["onClick"],he={class:"flex flex-row text-gray-500 text-[14px] items-center justify-between"},Ie={class:"text-black text-[22px]"},we={class:"flex flex-row justify-between"},ke={class:"h-[120px] w-[120px]"},De={class:"flex flex-1 flex-col justify-center ml-20"},$e={class:"flex flex-col justify-around"},Ce={key:0,class:"mt-2 flex flex-row justify-between"},Le={class:"text-gray-500 text-[14px]"},Ye={__name:"OrderInfoList",setup(p){const x=J("baseURL"),e=Z(),r=j({pageIndex:1,order_status:""}),f=j({listData:[],pageStart:1,pageEnd:1,totalCount:0,pageCount:0}),y=w(!1);N(()=>{m()});const D=_=>{r.pageIndex=_,m()},i={0:"\u672A\u4ED8\u6B3E",1:"\u5DF2\u4ED8\u6B3E",2:"\u5DF2\u53D1\u8D27",3:"\u5DF2\u7B7E\u6536"},v={1:"\u652F\u4ED8\u5B9D",2:"\u5FAE\u4FE1",3:"\u94F6\u884C\u5361",4:"\u8D27\u5230\u4ED8\u6B3E"},$=_=>{_?S.orderInfo.aliPay(_).then(d=>{location.href=d}).finally(()=>{y.value=!1}):Q.alert("\u8BA2\u5355\u53F7\u4E0D\u5B58\u5728\uFF0C\u8BF7\u91CD\u65B0\u4E0B\u5355","\u63D0\u793A",{type:"error"}).then(()=>{e.replace({name:"HomePage"})})};G(()=>r.order_status,(_,d)=>{r.pageIndex=1,m()});const m=()=>{y.value=!0,S.orderInfo.getListByPage(r).then(_=>{_.listData.forEach(d=>{d.totalMoney=0,d.orderDetailInfoList.forEach(b=>{b.goodsInfo.goods_photo=JSON.parse(b.goodsInfo.goods_photo),d.totalMoney+=b.goodsInfo.goods_sale_price*b.goods_num})}),f.listData=_.listData,f.pageStart=_.pageStart,f.pageEnd=_.pageEnd,f.totalCount=_.totalCount,f.pageCount=_.pageCount}).finally(()=>{y.value=!1})},h=w(!1),C=w(null),H=_=>{h.value=!0,C.value=_};return(_,d)=>{const b=g("el-image"),M=g("el-button"),q=g("el-card"),F=g("el-pagination"),R=g("el-skeleton"),A=g("el-drawer");return c(),u(E,null,[o("div",fe,[o("div",ge,[o("div",me,[ye,t(R,{animated:!0,loading:y.value},{default:a(()=>[o("ul",ve,[o("li",{onClick:d[0]||(d[0]=l=>r.order_status=""),class:I({active:r.order_status===""})}," \u5168\u90E8",2),o("li",{onClick:d[1]||(d[1]=l=>r.order_status="0"),class:I({active:r.order_status==="0"})},"\u672A\u4ED8\u6B3E",2),o("li",{onClick:d[2]||(d[2]=l=>r.order_status="1"),class:I({active:r.order_status==="1"})},"\u5DF2\u4ED8\u6B3E",2),o("li",{onClick:d[3]||(d[3]=l=>r.order_status="2"),class:I({active:r.order_status==="2"})},"\u5DF2\u53D1\u8D27",2),o("li",{onClick:d[4]||(d[4]=l=>r.order_status="3"),class:I({active:r.order_status==="3"})},"\u5DF2\u7B7E\u6536",2)]),(c(!0),u(E,null,K(f.listData,(l,Me)=>(c(),u("div",null,[t(q,{class:"box-card"},{header:a(()=>[o("div",be,[o("span",null,s(i[l.order_status]),1),l.order_status===0?(c(),u("span",{key:0,class:"text-gray-500 text-[12px] cursor-pointer ml-4 text-red-500 hover:underline",onClick:T=>$(l.id)},"\u53BB\u4ED8\u6B3E",8,xe)):k("",!0),o("div",he,[o("p",null,s(Y(V)(l.order_submission_time,"YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss"))+" | "+s(l.addressInfo.address_name)+" | \u8BA2\u5355\u53F7\uFF1A"+s(l.id)+" | \u5728\u7EBF\u652F\u4ED8\u3010"+s(v[l.order_pay_type])+"\u3011",1),o("div",null,[n(s(l.order_status===0?"\u8BA2\u5355":"\u5B9E\u4ED8")+"\u91D1\u989D\uFF1A",1),o("span",Ie,s(l.totalMoney.toFixed(2)),1),n("\u5143 ")])])])]),default:a(()=>[o("ul",we,[o("li",ke,[t(b,{loading:"lazy",src:Y(x)+l.orderDetailInfoList[0].goodsInfo.goods_photo[0],alt:""},null,8,["src"])]),o("li",De,[o("span",null,s(l.orderDetailInfoList[0].goodsInfo.goods_name),1),o("span",null,s(l.orderDetailInfoList[0].goodsInfo.goods_sale_price)+"\u5143 x "+s(l.orderDetailInfoList[0].goods_num),1)]),o("li",$e,[t(M,{onClick:T=>H(l.id)},{default:a(()=>[n("\u8BA2\u5355\u8BE6\u7EC6")]),_:2},1032,["onClick"]),t(M,null,{default:a(()=>[n("\u7533\u8BF7\u552E\u540E")]),_:1}),t(M,null,{default:a(()=>[n("\u8054\u7CFB\u5BA2\u670D")]),_:1})])])]),_:2},1024)]))),256)),f.listData.length>0?(c(),u("div",Ce,[o("p",Le,"\u5F53\u524D\u5171\u7B2C"+s(r.pageIndex)+"\u9875\uFF0C\u5171"+s(f.pageCount)+"\u9875\uFF0C\u5171"+s(f.totalCount)+"\u6761",1),t(F,{background:"",layout:"prev, pager, next","current-page":r.pageIndex,onCurrentChange:D,total:f.totalCount},null,8,["current-page","total"])])):k("",!0)]),_:1},8,["loading"])])])]),t(A,{modelValue:h.value,"onUpdate:modelValue":d[5]||(d[5]=l=>h.value=l),size:700,"destroy-on-close":!0,"with-header":!1},{default:a(()=>[t(ue,{"order-id":C.value},null,8,["order-id"])]),_:1},8,["modelValue"])],64)}}},Ve=O(Ye,[["__scopeId","data-v-3d963068"]]);export{Ve as default};
